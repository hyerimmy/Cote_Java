# ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ (ì¸ë±ìŠ¤ íŠ¸ã…‡ã…‡)

> íŠ¸ë¦¬ì˜ ì¢…ë¥˜
> 1. ì´ì§„íŠ¸ë¦¬
> 2. **ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ (ì¸ë±ìŠ¤ íŠ¸ë¦¬)**
> 3. LCA (ê³µí†µ ì¡°ìƒ íŠ¸ë¦¬)

## ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ë€?

- ì£¼ì–´ì§„ ë°ì´í„°ì˜ **êµ¬ê°„ í•©**ê³¼ **ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ ë¹ ë¥´ê²Œ** ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ê³ ì•ˆí•´ë‚¸ ìë£Œêµ¬ì¡° í˜•íƒœ
- ë” í° ë²”ìœ„ëŠ” ì¸ë±ìŠ¤ íŠ¸ë¦¬ì¸ë°, ì½”í…Œì—ì„œëŠ” í° ì°¨ì´ê°€ ì—†ë‹¤ê³  ìƒê°í•´ë„ ë¬´ë°©
- **ğŸŒŸêµ¬ê°„í•©ì„ êµ¬í•˜ëŠ”ë°, ê°’ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•œë‹¤ -> ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ğŸŒŸ**

## ğŸ’¥ í•µì‹¬ ì´ë¡  - A. íŠ¸ë¦¬ ì´ˆê¸°í™” ë°©ë²•(â˜…â˜…)

<U>ë¦¬í”„ ë…¸ë“œë§Œ ì›ë³¸ ë°ì´í„°</U>ì¸ íŠ¸ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒ.

### 1. íŠ¸ë¦¬ ë°°ì—´ í¬ê¸° ì§€ì •

- **2^k >= N ì„ ë§Œì¡±í•˜ëŠ” kì˜ ìµœì†Ÿê°’ì„ êµ¬í•œ í›„ 2^k * 2ë¥¼ íŠ¸ë¦¬ ë°°ì—´ì˜ í¬ê¸°**ë¡œ ì§€ì •

### 2. ì›ë³¸ ë°ì´í„° ì…ë ¥

- **2^kë¥¼ ì‹œì‘ ì¸ë±ìŠ¤**ë¡œ ì·¨í•´ ì›ë³¸ ë°ì´í„°ë¥¼ ì…ë ¥í•œë‹¤.

![26_segementtree_1.png](img/26_segementtree_1.png)
![26_segementtree_1.png](img/26_segementtree_2.png)

### 3. ë¦¬í”„ë…¸ë“œ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë…¸ë“œ ê°’ ì±„ìš°ê¸°

- ì±„ì›Œì•¼ í•  ë…¸ë“œì˜ ìì‹ ë…¸ë“œë¥¼ ì´ìš©í•´ ê°’ì„ ì±„ìš´ë‹¤.
- ì¸ë±ìŠ¤ê°€ Nì´ë¼ë©´, ìì‹ ë…¸ë“œëŠ” 2N, 2N+1ì´ ëœë‹¤.

![26_segementtree_3.png](img/26_segementtree_3.png)
![26_segementtree_4.png](img/26_segementtree_4.png)

## ğŸ’¥ í•µì‹¬ ì´ë¡  - B. ì§ˆì˜ê°’ êµ¬í•˜ëŠ” ë°©ë²•(â˜…â˜…â˜…)

### 1. ì£¼ì–´ì§„ ì§ˆì˜ ì¸ë±ìŠ¤ë¥¼ ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ì˜ ë¦¬í”„ ë…¸ë“œì— í•´ë‹¹í•˜ëŠ” ì¸ë±ìŠ¤ë¡œ ë³€ê²½

- `ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ index` = `ì£¼ì–´ì§„ ì§ˆì˜ index + 2^k - 1`

### 2. ì§ˆì˜ê°’ êµ¬í•˜ê¸° (âš ï¸ì–´ë ¤ì›€ì£¼ì˜âš ï¸)

1. start_index % 2 == 1ì¼ë•Œ í•´ë‹¹ ë…¸ë“œë¥¼ ì„ íƒí•œë‹¤.
2. end_index % 2 == 0ì¼ë•Œ í•´ë‹¹ ë…¸ë“œë¥¼ ì„ íƒí•œë‹¤.
3. start_index depth ë³€ê²½ : start_index = (start_index + 1) / 2 ì—°ì‚°ì„ ì‹¤í–‰í•œë‹¤.
4. end_index depth ë³€ê²½ : end_index = (end_index - 1) / 2 ì—°ì‚°ì„ ì‹¤í–‰í•œë‹¤.
5. 1~2ë¥¼ ë°˜ë³µí•˜ë‹¤ê°€ end_index < start_indexê°€ ë˜ë©´ ì¢…ë£Œí•œë‹¤.

> - 1~2 : í•´ë‹¹ ë…¸ë“œì˜ ë¶€ëª¨ê°€ ë‚˜íƒ€ë‚´ëŠ” ë²”ìœ„ê°€ ì§ˆì˜ ë²”ìœ„ë¥¼ ë„˜ì–´ê°€ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë…¸ë“œë¥¼ ì§ˆì˜ê°’ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë…ë¦½ ë…¸ë“œë¡œ ì„ íƒí•˜ê³ , í•´ë‹¹ ë…¸ë“œì˜ ë¶€ëª¨ ë…¸ë“œëŠ” ëŒ€ìƒ ë²”ìœ„ì—ì„œ ì œì™¸í•œë‹¤ëŠ” ëœ»
> - 3~4 : ì§ˆì˜ ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ë¶€ëª¨ ë…¸ë“œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ ì¸ë±ìŠ¤ ì—°ì‚°ì„ index/2ê°€ ì•„ë‹Œ (index+1)/2, (index-1)/2ë¡œ ìˆ˜í–‰í•œë‹¤ëŠ” ê²ƒ

### ğŸ˜ˆ ì˜ˆì‹œ

![img.png](img/26_segementtree_5.png)
2~6ê¹Œì§€ì˜ êµ¬ê°„í•©ì„ êµ¬í•œë‹¤ê³  ê°€ì •í•´ë³´ì.  
2, 6ì„ ê°ê° íŠ¸ë¦¬ ì¸ë±ìŠ¤ë¡œ ë°”ê¿”ì¤€ë‹¤.

![img_2.png](img/26_segementtree_6.png)
ë¶€ëª¨ ë…¸ë“œë¥¼ ê³„ì‚°í•œë‹¤.  
íŠ¸ë¦¬ ì¸ë±ìŠ¤ê°€ í™€ìˆ˜ë¼ë©´ ì˜¤ë¥¸ìª½ì— ìˆëŠ” ë…¸ë“œì´ë‹¤.  
start_index [9]ëŠ” í™€ìˆ˜ì´ë¯€ë¡œ(ì˜¤ë¥¸ìª½ì— ìœ„ì¹˜í•œ ìì‹ë…¸ë“œ) ë¶€ëª¨ ë…¸ë“œì¸ [4]ì€ í•„ìš” ì—†ëŠ” ê°’ì¸ [8]ë„ í•©í•œ ê°’ì´ê¸° ë•Œë¬¸ì— í•„ìš”ì—†ë‹¤.  
ë”°ë¼ì„œ ë¶€ëª¨ ë…¸ë“œë¡œ [4]ë¥¼ ì„ íƒí•˜ì§€ ì•Šê³ , [9]ì˜ ê°’ë§Œ ë”°ë¡œ í‚µí•´ë‘ê³  [5]ë¥¼ ë¶€ëª¨ ë…¸ë“œë¡œ ì„ íƒí•œë‹¤.
end_index [13]ì˜ ë¶€ëª¨ë…¸ë“œì¸ [6]ì˜ ê²½ìš°, ì˜¨ì „íˆ ë²”ìœ„ë§Œì„ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ë¶€ëª¨ ë…¸ë“œë¡œ ì„ íƒí•œë‹¤.

![img_3.png](img/26_segementtree_7.png)
ìœ„ì™€ ë™ì¼í•˜ê²Œ ë°˜ë³µí•œë‹¤.  
start_indexê°€ end_indexë³´ë‹¤ í¬ë‹¤ë©´ ë°˜ë³µì„ ì¢…ë£Œí•œë‹¤.  
ìµœì¢…ì ìœ¼ë¡œ êµ¬í•œ ë¶€ëª¨ë…¸ë“œ ë‘ ê°œ(7,9) ë”í•˜ê³ , í‚µí–ˆë˜ ê°’(8)ë„ ë”í•´ì£¼ë©´ êµ¬ê°„í•©(24)ì´ ë‚˜ì˜¨ë‹¤.

## ğŸ’¥ í•µì‹¬ ì´ë¡  - C. ë°ì´í„° ì—…ë°ì´íŠ¸ ë°©ë²•(â˜…â˜…)

1. ë¦¬í”„ ë…¸ë“œ ê°’ì„ ë³€ê²½í•œë‹¤.
2. ë¶€ëª¨ ë…¸ë“œë¡œ ì´ë™í•´ì„œ (**index / 2**) ê°’ì„ ì—…ë°ì´íŠ¸í•œë‹¤.
3. 2ë¥¼ ë°˜ë³µí•˜ë©° ì—…ë°ì´íŠ¸í•œë‹¤.
    - ìµœëŒ€, ìµœì†Œ : ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚˜ì§€ ì•Šìœ¼ë©´ ì¢…ë£Œí•œë‹¤.
    - í•© : ë£¨íŠ¸ë…¸ë“œê¹Œì§€ ì—…ë°ì´íŠ¸í•œ í›„ ì¢…ë£Œí•œë‹¤.

![img_4.png](img/26_segementtree_8.png)

## ìš”ì•½ ì •ë¦¬

### ì„¸ê·¸ë¨¼íŠ¸ íŠ¸ë¦¬ ë‹¨ê³„

1. íŠ¸ë¦¬ ì´ˆê¸°í™”í•˜ê¸°
    1. í¬ê¸° ì •í•˜ê¸° (`2^k >= N`ì˜ `2^k * 2`)
    2. ë¦¬í”„ë…¸ë“œ ì±„ìš°ê¸° (start_index = `2^k`)
    3. ë¶€ëª¨ ë…¸ë“œ ê°’ ì±„ìš°ê¸° (ë¶€ëª¨ì¸ë±ìŠ¤ = `index / 2`)
2. ì§ˆì˜ê°’ êµ¬í•˜ê¸°
    1. ì§ˆì˜ indexë¥¼ íŠ¸ë¦¬ì— ë§ê²Œ ë³€ê²½ (íŠ¸ë¦¬ ì¸ë±ìŠ¤ =`ì§ˆì˜index + 2^k - 1`)
    2. ë…¸ë“œ ê°’ ì„ íƒ (`start_index í™€ìˆ˜`ì¼ë•Œ, `end_index ì§ìˆ˜`ì¼ë•Œ ì„ íƒ)
    3. start_index < end_index ì¼ ë–„ ê¹Œì§€ ë¶€ëª¨ ë…¸ë“œ ê°’ ì„ íƒ (`(start_index + 1) / 2`, `(end_index -1) / 2`)
3. ê°’ ì—…ë°ì´íŠ¸
    1. íŠ¸ë¦¬ì˜ íŠ¹ì„±ì„ ì‚´ë ¤ ë¶€ëª¨ë¡œ ê°€ë©° ê°’ ì—…ë°ì´íŠ¸
